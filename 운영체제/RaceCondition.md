# Race Contidion 의 정의와 이를 방지하기 위한 방법

---

> Race Condition 의 정의

- 동일한 데이터를 서로 다른 여러 스레드들이 접근하는 과정에서 생기는 문제
- 스레드들은 메모리를 공유하기에 멀티 스레드 환경에서 일어나는 현상이다.
- 1️⃣ CPU 로 연산할 값을 가져온다. 2️⃣ CPU 에서 연산을 한다. 3️⃣ 결과를 저장한다.
    - 이 3 가지의 과정이 다 끝나기도 전에 다른 스레드가 메모리에 접근했다면(Race Condition) 잘못된 결과가 저장 될 수 있다.

> Race Contidion 을 방지하기 위한 방법

- 1️⃣2️⃣3️⃣ 과정은 동기화하도록 한다.
- 모니터
- 뮤텍스
    
    ![image](https://user-images.githubusercontent.com/42318591/122630783-5370b580-d101-11eb-92b4-72d765356b54.png)

    - 동기화 대상이 하나.
    - 프로세스 다중 실행을 막을 때
    - 뮤텍스로 막은 임계영역은 하나의 스레드만 접근할 수 있도록 한다.
    - 뮤텍스는 소유가 가능하며 소유중인 스레드가 뮤텍스를 해제해야 한다.
- 세마포어
    - 동기화 대상이 여러개일 수 있음.
    - 접근 가능한 스레드 수를 카운트다운 한다.
    - 소유할 수 없으며 소유하지 않는 스레드가 세마포어를 해제할 수도 있다.
- 여담으로 C++ 에선
    - `std::atomic` , `std::mutex` , `std::lock_guard`